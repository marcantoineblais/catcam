# Image from GitHub Actions: ghcr.io/<your-github-username-or-org>/catcam:latest
# Set CATCAM_IMAGE in stack.env when using the CI-built image (see README).
# All app env vars (DOMAIN_NAME, SERVER_URL, etc.) come from env_file: stack.env.
# Do not re-list them in environment: or Compose substitutes from the host and can overwrite with empty.
services:
  catcam:
    image: ${CATCAM_IMAGE:-catcam:latest}
    container_name: catcam
    env_file: stack.env
    ports:
      - "${PORT}:${PORT}"
    restart: unless-stopped
    volumes:
      - user-settings:${USER_SETTINGS_PATH:-/data/user-settings}
    networks:
      - catcam-network

volumes:
  user-settings:

networks:
  catcam-network:
    driver: bridge